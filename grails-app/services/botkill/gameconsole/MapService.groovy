package botkill.gameconsole

import botkill.gameconsole.enums.GameEnvironment
import grails.plugins.rest.client.RestBuilder
import org.codehaus.groovy.grails.web.json.JSONArray
import org.codehaus.groovy.grails.web.json.JSONObject

class MapService {

    def rest = new RestBuilder()

    def getMap(int playerCount, GameEnvironment environment) {
        final float SCREEN_RATIO = 16/9
        int width = 10 * playerCount + 30
        int height = Math.floor(width/SCREEN_RATIO)

        String tilesString = '{"tiles":[{"Type":"type","X":0.0,"Y":0.0},{"Type":"type","X":1.0,"Y":0.0},{"Type":"type","X":2.0,"Y":0.0},{"Type":"type","X":3.0,"Y":0.0},{"Type":"type","X":4.0,"Y":0.0},{"Type":"type","X":5.0,"Y":0.0},{"Type":"type","X":6.0,"Y":0.0},{"Type":"type","X":7.0,"Y":0.0},{"Type":"type","X":8.0,"Y":0.0},{"Type":"type","X":9.0,"Y":0.0},{"Type":"type","X":10.0,"Y":0.0},{"Type":"type","X":11.0,"Y":0.0},{"Type":"type","X":12.0,"Y":0.0},{"Type":"type","X":13.0,"Y":0.0},{"Type":"type","X":14.0,"Y":0.0},{"Type":"type","X":15.0,"Y":0.0},{"Type":"type","X":16.0,"Y":0.0},{"Type":"type","X":17.0,"Y":0.0},{"Type":"type","X":18.0,"Y":0.0},{"Type":"type","X":19.0,"Y":0.0},{"Type":"type","X":20.0,"Y":0.0},{"Type":"type","X":21.0,"Y":0.0},{"Type":"type","X":22.0,"Y":0.0},{"Type":"type","X":23.0,"Y":0.0},{"Type":"type","X":24.0,"Y":0.0},{"Type":"type","X":25.0,"Y":0.0},{"Type":"type","X":26.0,"Y":0.0},{"Type":"type","X":27.0,"Y":0.0},{"Type":"type","X":28.0,"Y":0.0},{"Type":"type","X":29.0,"Y":0.0},{"Type":"type","X":30.0,"Y":0.0},{"Type":"type","X":31.0,"Y":0.0},{"Type":"type","X":32.0,"Y":0.0},{"Type":"type","X":33.0,"Y":0.0},{"Type":"type","X":34.0,"Y":0.0},{"Type":"type","X":35.0,"Y":0.0},{"Type":"type","X":36.0,"Y":0.0},{"Type":"type","X":37.0,"Y":0.0},{"Type":"type","X":38.0,"Y":0.0},{"Type":"type","X":39.0,"Y":0.0},{"Type":"type","X":40.0,"Y":0.0},{"Type":"type","X":41.0,"Y":0.0},{"Type":"type","X":42.0,"Y":0.0},{"Type":"type","X":43.0,"Y":0.0},{"Type":"type","X":44.0,"Y":0.0},{"Type":"type","X":45.0,"Y":0.0},{"Type":"type","X":46.0,"Y":0.0},{"Type":"type","X":47.0,"Y":0.0},{"Type":"type","X":48.0,"Y":0.0},{"Type":"type","X":49.0,"Y":0.0},{"Type":"type","X":0.0,"Y":1.0},{"Type":"type","X":1.0,"Y":1.0},{"Type":"type","X":2.0,"Y":1.0},{"Type":"type","X":3.0,"Y":1.0},{"Type":"type","X":4.0,"Y":1.0},{"Type":"type","X":5.0,"Y":1.0},{"Type":"type","X":6.0,"Y":1.0},{"Type":"type","X":7.0,"Y":1.0},{"Type":"type","X":8.0,"Y":1.0},{"Type":"type","X":9.0,"Y":1.0},{"Type":"type","X":10.0,"Y":1.0},{"Type":"type","X":11.0,"Y":1.0},{"Type":"type","X":12.0,"Y":1.0},{"Type":"type","X":13.0,"Y":1.0},{"Type":"type","X":14.0,"Y":1.0},{"Type":"type","X":15.0,"Y":1.0},{"Type":"type","X":18.0,"Y":1.0},{"Type":"type","X":19.0,"Y":1.0},{"Type":"type","X":20.0,"Y":1.0},{"Type":"type","X":21.0,"Y":1.0},{"Type":"type","X":22.0,"Y":1.0},{"Type":"type","X":23.0,"Y":1.0},{"Type":"type","X":24.0,"Y":1.0},{"Type":"type","X":25.0,"Y":1.0},{"Type":"type","X":26.0,"Y":1.0},{"Type":"type","X":27.0,"Y":1.0},{"Type":"type","X":28.0,"Y":1.0},{"Type":"type","X":29.0,"Y":1.0},{"Type":"type","X":30.0,"Y":1.0},{"Type":"type","X":31.0,"Y":1.0},{"Type":"type","X":32.0,"Y":1.0},{"Type":"type","X":33.0,"Y":1.0},{"Type":"type","X":34.0,"Y":1.0},{"Type":"type","X":35.0,"Y":1.0},{"Type":"type","X":36.0,"Y":1.0},{"Type":"type","X":37.0,"Y":1.0},{"Type":"type","X":38.0,"Y":1.0},{"Type":"type","X":39.0,"Y":1.0},{"Type":"type","X":40.0,"Y":1.0},{"Type":"type","X":41.0,"Y":1.0},{"Type":"type","X":42.0,"Y":1.0},{"Type":"type","X":45.0,"Y":1.0},{"Type":"type","X":46.0,"Y":1.0},{"Type":"type","X":47.0,"Y":1.0},{"Type":"type","X":48.0,"Y":1.0},{"Type":"type","X":49.0,"Y":1.0},{"Type":"type","X":0.0,"Y":2.0},{"Type":"type","X":1.0,"Y":2.0},{"Type":"type","X":2.0,"Y":2.0},{"Type":"type","X":3.0,"Y":2.0},{"Type":"type","X":4.0,"Y":2.0},{"Type":"type","X":5.0,"Y":2.0},{"Type":"type","X":6.0,"Y":2.0},{"Type":"type","X":7.0,"Y":2.0},{"Type":"type","X":8.0,"Y":2.0},{"Type":"type","X":9.0,"Y":2.0},{"Type":"type","X":10.0,"Y":2.0},{"Type":"type","X":11.0,"Y":2.0},{"Type":"type","X":12.0,"Y":2.0},{"Type":"type","X":13.0,"Y":2.0},{"Type":"type","X":24.0,"Y":2.0},{"Type":"type","X":25.0,"Y":2.0},{"Type":"type","X":26.0,"Y":2.0},{"Type":"type","X":27.0,"Y":2.0},{"Type":"type","X":28.0,"Y":2.0},{"Type":"type","X":29.0,"Y":2.0},{"Type":"type","X":30.0,"Y":2.0},{"Type":"type","X":31.0,"Y":2.0},{"Type":"type","X":32.0,"Y":2.0},{"Type":"type","X":33.0,"Y":2.0},{"Type":"type","X":34.0,"Y":2.0},{"Type":"type","X":37.0,"Y":2.0},{"Type":"type","X":38.0,"Y":2.0},{"Type":"type","X":39.0,"Y":2.0},{"Type":"type","X":40.0,"Y":2.0},{"Type":"type","X":41.0,"Y":2.0},{"Type":"type","X":46.0,"Y":2.0},{"Type":"type","X":47.0,"Y":2.0},{"Type":"type","X":48.0,"Y":2.0},{"Type":"type","X":49.0,"Y":2.0},{"Type":"type","X":0.0,"Y":3.0},{"Type":"type","X":1.0,"Y":3.0},{"Type":"type","X":4.0,"Y":3.0},{"Type":"type","X":5.0,"Y":3.0},{"Type":"type","X":6.0,"Y":3.0},{"Type":"type","X":7.0,"Y":3.0},{"Type":"type","X":8.0,"Y":3.0},{"Type":"type","X":9.0,"Y":3.0},{"Type":"type","X":10.0,"Y":3.0},{"Type":"type","X":11.0,"Y":3.0},{"Type":"type","X":12.0,"Y":3.0},{"Type":"type","X":28.0,"Y":3.0},{"Type":"type","X":29.0,"Y":3.0},{"Type":"type","X":30.0,"Y":3.0},{"Type":"type","X":31.0,"Y":3.0},{"Type":"type","X":32.0,"Y":3.0},{"Type":"type","X":33.0,"Y":3.0},{"Type":"type","X":38.0,"Y":3.0},{"Type":"type","X":39.0,"Y":3.0},{"Type":"type","X":40.0,"Y":3.0},{"Type":"type","X":46.0,"Y":3.0},{"Type":"type","X":47.0,"Y":3.0},{"Type":"type","X":48.0,"Y":3.0},{"Type":"type","X":49.0,"Y":3.0},{"Type":"type","X":0.0,"Y":4.0},{"Type":"type","X":8.0,"Y":4.0},{"Type":"type","X":9.0,"Y":4.0},{"Type":"type","X":10.0,"Y":4.0},{"Type":"type","X":11.0,"Y":4.0},{"Type":"type","X":29.0,"Y":4.0},{"Type":"type","X":30.0,"Y":4.0},{"Type":"type","X":31.0,"Y":4.0},{"Type":"type","X":32.0,"Y":4.0},{"Type":"type","X":33.0,"Y":4.0},{"Type":"type","X":38.0,"Y":4.0},{"Type":"type","X":39.0,"Y":4.0},{"Type":"type","X":40.0,"Y":4.0},{"Type":"type","X":46.0,"Y":4.0},{"Type":"type","X":47.0,"Y":4.0},{"Type":"type","X":48.0,"Y":4.0},{"Type":"type","X":49.0,"Y":4.0},{"Type":"type","X":0.0,"Y":5.0},{"Type":"type","X":9.0,"Y":5.0},{"Type":"type","X":10.0,"Y":5.0},{"Type":"type","X":11.0,"Y":5.0},{"Type":"type","X":31.0,"Y":5.0},{"Type":"type","X":32.0,"Y":5.0},{"Type":"type","X":38.0,"Y":5.0},{"Type":"type","X":39.0,"Y":5.0},{"Type":"type","X":40.0,"Y":5.0},{"Type":"type","X":47.0,"Y":5.0},{"Type":"type","X":48.0,"Y":5.0},{"Type":"type","X":49.0,"Y":5.0},{"Type":"type","X":0.0,"Y":6.0},{"Type":"type","X":1.0,"Y":6.0},{"Type":"type","X":9.0,"Y":6.0},{"Type":"type","X":10.0,"Y":6.0},{"Type":"type","X":11.0,"Y":6.0},{"Type":"type","X":37.0,"Y":6.0},{"Type":"type","X":38.0,"Y":6.0},{"Type":"type","X":39.0,"Y":6.0},{"Type":"type","X":40.0,"Y":6.0},{"Type":"type","X":48.0,"Y":6.0},{"Type":"type","X":49.0,"Y":6.0},{"Type":"type","X":0.0,"Y":7.0},{"Type":"type","X":1.0,"Y":7.0},{"Type":"type","X":9.0,"Y":7.0},{"Type":"type","X":10.0,"Y":7.0},{"Type":"type","X":11.0,"Y":7.0},{"Type":"type","X":27.0,"Y":7.0},{"Type":"type","X":28.0,"Y":7.0},{"Type":"type","X":29.0,"Y":7.0},{"Type":"type","X":30.0,"Y":7.0},{"Type":"type","X":37.0,"Y":7.0},{"Type":"type","X":38.0,"Y":7.0},{"Type":"type","X":39.0,"Y":7.0},{"Type":"type","X":40.0,"Y":7.0},{"Type":"type","X":48.0,"Y":7.0},{"Type":"type","X":49.0,"Y":7.0},{"Type":"type","X":0.0,"Y":8.0},{"Type":"type","X":1.0,"Y":8.0},{"Type":"type","X":26.0,"Y":8.0},{"Type":"type","X":27.0,"Y":8.0},{"Type":"type","X":28.0,"Y":8.0},{"Type":"type","X":29.0,"Y":8.0},{"Type":"type","X":30.0,"Y":8.0},{"Type":"type","X":31.0,"Y":8.0},{"Type":"type","X":36.0,"Y":8.0},{"Type":"type","X":37.0,"Y":8.0},{"Type":"type","X":38.0,"Y":8.0},{"Type":"type","X":39.0,"Y":8.0},{"Type":"type","X":48.0,"Y":8.0},{"Type":"type","X":49.0,"Y":8.0},{"Type":"type","X":0.0,"Y":9.0},{"Type":"type","X":1.0,"Y":9.0},{"Type":"type","X":2.0,"Y":9.0},{"Type":"type","X":26.0,"Y":9.0},{"Type":"type","X":27.0,"Y":9.0},{"Type":"type","X":28.0,"Y":9.0},{"Type":"type","X":29.0,"Y":9.0},{"Type":"type","X":30.0,"Y":9.0},{"Type":"type","X":31.0,"Y":9.0},{"Type":"type","X":35.0,"Y":9.0},{"Type":"type","X":36.0,"Y":9.0},{"Type":"type","X":37.0,"Y":9.0},{"Type":"type","X":38.0,"Y":9.0},{"Type":"type","X":48.0,"Y":9.0},{"Type":"type","X":49.0,"Y":9.0},{"Type":"type","X":0.0,"Y":10.0},{"Type":"type","X":1.0,"Y":10.0},{"Type":"type","X":2.0,"Y":10.0},{"Type":"type","X":25.0,"Y":10.0},{"Type":"type","X":26.0,"Y":10.0},{"Type":"type","X":27.0,"Y":10.0},{"Type":"type","X":28.0,"Y":10.0},{"Type":"type","X":29.0,"Y":10.0},{"Type":"type","X":30.0,"Y":10.0},{"Type":"type","X":34.0,"Y":10.0},{"Type":"type","X":35.0,"Y":10.0},{"Type":"type","X":36.0,"Y":10.0},{"Type":"type","X":37.0,"Y":10.0},{"Type":"type","X":47.0,"Y":10.0},{"Type":"type","X":48.0,"Y":10.0},{"Type":"type","X":49.0,"Y":10.0},{"Type":"type","X":0.0,"Y":11.0},{"Type":"type","X":1.0,"Y":11.0},{"Type":"type","X":2.0,"Y":11.0},{"Type":"type","X":3.0,"Y":11.0},{"Type":"type","X":24.0,"Y":11.0},{"Type":"type","X":25.0,"Y":11.0},{"Type":"type","X":26.0,"Y":11.0},{"Type":"type","X":27.0,"Y":11.0},{"Type":"type","X":34.0,"Y":11.0},{"Type":"type","X":35.0,"Y":11.0},{"Type":"type","X":36.0,"Y":11.0},{"Type":"type","X":47.0,"Y":11.0},{"Type":"type","X":48.0,"Y":11.0},{"Type":"type","X":49.0,"Y":11.0},{"Type":"type","X":0.0,"Y":12.0},{"Type":"type","X":1.0,"Y":12.0},{"Type":"type","X":2.0,"Y":12.0},{"Type":"type","X":3.0,"Y":12.0},{"Type":"type","X":22.0,"Y":12.0},{"Type":"type","X":23.0,"Y":12.0},{"Type":"type","X":24.0,"Y":12.0},{"Type":"type","X":25.0,"Y":12.0},{"Type":"type","X":26.0,"Y":12.0},{"Type":"type","X":35.0,"Y":12.0},{"Type":"type","X":46.0,"Y":12.0},{"Type":"type","X":47.0,"Y":12.0},{"Type":"type","X":48.0,"Y":12.0},{"Type":"type","X":49.0,"Y":12.0},{"Type":"type","X":0.0,"Y":13.0},{"Type":"type","X":1.0,"Y":13.0},{"Type":"type","X":2.0,"Y":13.0},{"Type":"type","X":3.0,"Y":13.0},{"Type":"type","X":21.0,"Y":13.0},{"Type":"type","X":22.0,"Y":13.0},{"Type":"type","X":23.0,"Y":13.0},{"Type":"type","X":24.0,"Y":13.0},{"Type":"type","X":25.0,"Y":13.0},{"Type":"type","X":46.0,"Y":13.0},{"Type":"type","X":47.0,"Y":13.0},{"Type":"type","X":48.0,"Y":13.0},{"Type":"type","X":49.0,"Y":13.0},{"Type":"type","X":0.0,"Y":14.0},{"Type":"type","X":1.0,"Y":14.0},{"Type":"type","X":2.0,"Y":14.0},{"Type":"type","X":3.0,"Y":14.0},{"Type":"type","X":21.0,"Y":14.0},{"Type":"type","X":22.0,"Y":14.0},{"Type":"type","X":23.0,"Y":14.0},{"Type":"type","X":24.0,"Y":14.0},{"Type":"type","X":47.0,"Y":14.0},{"Type":"type","X":48.0,"Y":14.0},{"Type":"type","X":49.0,"Y":14.0},{"Type":"type","X":0.0,"Y":15.0},{"Type":"type","X":1.0,"Y":15.0},{"Type":"type","X":2.0,"Y":15.0},{"Type":"type","X":3.0,"Y":15.0},{"Type":"type","X":7.0,"Y":15.0},{"Type":"type","X":8.0,"Y":15.0},{"Type":"type","X":9.0,"Y":15.0},{"Type":"type","X":22.0,"Y":15.0},{"Type":"type","X":23.0,"Y":15.0},{"Type":"type","X":47.0,"Y":15.0},{"Type":"type","X":48.0,"Y":15.0},{"Type":"type","X":49.0,"Y":15.0},{"Type":"type","X":0.0,"Y":16.0},{"Type":"type","X":1.0,"Y":16.0},{"Type":"type","X":2.0,"Y":16.0},{"Type":"type","X":3.0,"Y":16.0},{"Type":"type","X":7.0,"Y":16.0},{"Type":"type","X":8.0,"Y":16.0},{"Type":"type","X":9.0,"Y":16.0},{"Type":"type","X":10.0,"Y":16.0},{"Type":"type","X":46.0,"Y":16.0},{"Type":"type","X":47.0,"Y":16.0},{"Type":"type","X":48.0,"Y":16.0},{"Type":"type","X":49.0,"Y":16.0},{"Type":"type","X":0.0,"Y":17.0},{"Type":"type","X":1.0,"Y":17.0},{"Type":"type","X":2.0,"Y":17.0},{"Type":"type","X":7.0,"Y":17.0},{"Type":"type","X":8.0,"Y":17.0},{"Type":"type","X":9.0,"Y":17.0},{"Type":"type","X":10.0,"Y":17.0},{"Type":"type","X":11.0,"Y":17.0},{"Type":"type","X":12.0,"Y":17.0},{"Type":"type","X":13.0,"Y":17.0},{"Type":"type","X":46.0,"Y":17.0},{"Type":"type","X":47.0,"Y":17.0},{"Type":"type","X":48.0,"Y":17.0},{"Type":"type","X":49.0,"Y":17.0},{"Type":"type","X":0.0,"Y":18.0},{"Type":"type","X":1.0,"Y":18.0},{"Type":"type","X":6.0,"Y":18.0},{"Type":"type","X":7.0,"Y":18.0},{"Type":"type","X":8.0,"Y":18.0},{"Type":"type","X":9.0,"Y":18.0},{"Type":"type","X":10.0,"Y":18.0},{"Type":"type","X":11.0,"Y":18.0},{"Type":"type","X":12.0,"Y":18.0},{"Type":"type","X":13.0,"Y":18.0},{"Type":"type","X":14.0,"Y":18.0},{"Type":"type","X":46.0,"Y":18.0},{"Type":"type","X":47.0,"Y":18.0},{"Type":"type","X":48.0,"Y":18.0},{"Type":"type","X":49.0,"Y":18.0},{"Type":"type","X":0.0,"Y":19.0},{"Type":"type","X":1.0,"Y":19.0},{"Type":"type","X":5.0,"Y":19.0},{"Type":"type","X":6.0,"Y":19.0},{"Type":"type","X":7.0,"Y":19.0},{"Type":"type","X":8.0,"Y":19.0},{"Type":"type","X":9.0,"Y":19.0},{"Type":"type","X":10.0,"Y":19.0},{"Type":"type","X":11.0,"Y":19.0},{"Type":"type","X":12.0,"Y":19.0},{"Type":"type","X":13.0,"Y":19.0},{"Type":"type","X":14.0,"Y":19.0},{"Type":"type","X":15.0,"Y":19.0},{"Type":"type","X":47.0,"Y":19.0},{"Type":"type","X":48.0,"Y":19.0},{"Type":"type","X":49.0,"Y":19.0},{"Type":"type","X":0.0,"Y":20.0},{"Type":"type","X":5.0,"Y":20.0},{"Type":"type","X":6.0,"Y":20.0},{"Type":"type","X":7.0,"Y":20.0},{"Type":"type","X":8.0,"Y":20.0},{"Type":"type","X":9.0,"Y":20.0},{"Type":"type","X":10.0,"Y":20.0},{"Type":"type","X":11.0,"Y":20.0},{"Type":"type","X":12.0,"Y":20.0},{"Type":"type","X":13.0,"Y":20.0},{"Type":"type","X":14.0,"Y":20.0},{"Type":"type","X":15.0,"Y":20.0},{"Type":"type","X":47.0,"Y":20.0},{"Type":"type","X":48.0,"Y":20.0},{"Type":"type","X":49.0,"Y":20.0},{"Type":"type","X":0.0,"Y":21.0},{"Type":"type","X":5.0,"Y":21.0},{"Type":"type","X":6.0,"Y":21.0},{"Type":"type","X":7.0,"Y":21.0},{"Type":"type","X":8.0,"Y":21.0},{"Type":"type","X":11.0,"Y":21.0},{"Type":"type","X":12.0,"Y":21.0},{"Type":"type","X":13.0,"Y":21.0},{"Type":"type","X":14.0,"Y":21.0},{"Type":"type","X":15.0,"Y":21.0},{"Type":"type","X":34.0,"Y":21.0},{"Type":"type","X":35.0,"Y":21.0},{"Type":"type","X":36.0,"Y":21.0},{"Type":"type","X":37.0,"Y":21.0},{"Type":"type","X":48.0,"Y":21.0},{"Type":"type","X":49.0,"Y":21.0},{"Type":"type","X":0.0,"Y":22.0},{"Type":"type","X":1.0,"Y":22.0},{"Type":"type","X":6.0,"Y":22.0},{"Type":"type","X":7.0,"Y":22.0},{"Type":"type","X":12.0,"Y":22.0},{"Type":"type","X":13.0,"Y":22.0},{"Type":"type","X":14.0,"Y":22.0},{"Type":"type","X":33.0,"Y":22.0},{"Type":"type","X":34.0,"Y":22.0},{"Type":"type","X":35.0,"Y":22.0},{"Type":"type","X":36.0,"Y":22.0},{"Type":"type","X":37.0,"Y":22.0},{"Type":"type","X":38.0,"Y":22.0},{"Type":"type","X":42.0,"Y":22.0},{"Type":"type","X":43.0,"Y":22.0},{"Type":"type","X":48.0,"Y":22.0},{"Type":"type","X":49.0,"Y":22.0},{"Type":"type","X":0.0,"Y":23.0},{"Type":"type","X":1.0,"Y":23.0},{"Type":"type","X":2.0,"Y":23.0},{"Type":"type","X":33.0,"Y":23.0},{"Type":"type","X":34.0,"Y":23.0},{"Type":"type","X":35.0,"Y":23.0},{"Type":"type","X":36.0,"Y":23.0},{"Type":"type","X":37.0,"Y":23.0},{"Type":"type","X":38.0,"Y":23.0},{"Type":"type","X":39.0,"Y":23.0},{"Type":"type","X":40.0,"Y":23.0},{"Type":"type","X":41.0,"Y":23.0},{"Type":"type","X":42.0,"Y":23.0},{"Type":"type","X":43.0,"Y":23.0},{"Type":"type","X":44.0,"Y":23.0},{"Type":"type","X":48.0,"Y":23.0},{"Type":"type","X":49.0,"Y":23.0},{"Type":"type","X":0.0,"Y":24.0},{"Type":"type","X":1.0,"Y":24.0},{"Type":"type","X":2.0,"Y":24.0},{"Type":"type","X":32.0,"Y":24.0},{"Type":"type","X":33.0,"Y":24.0},{"Type":"type","X":34.0,"Y":24.0},{"Type":"type","X":35.0,"Y":24.0},{"Type":"type","X":36.0,"Y":24.0},{"Type":"type","X":37.0,"Y":24.0},{"Type":"type","X":38.0,"Y":24.0},{"Type":"type","X":39.0,"Y":24.0},{"Type":"type","X":40.0,"Y":24.0},{"Type":"type","X":41.0,"Y":24.0},{"Type":"type","X":42.0,"Y":24.0},{"Type":"type","X":43.0,"Y":24.0},{"Type":"type","X":44.0,"Y":24.0},{"Type":"type","X":48.0,"Y":24.0},{"Type":"type","X":49.0,"Y":24.0},{"Type":"type","X":0.0,"Y":25.0},{"Type":"type","X":1.0,"Y":25.0},{"Type":"type","X":2.0,"Y":25.0},{"Type":"type","X":31.0,"Y":25.0},{"Type":"type","X":32.0,"Y":25.0},{"Type":"type","X":33.0,"Y":25.0},{"Type":"type","X":34.0,"Y":25.0},{"Type":"type","X":35.0,"Y":25.0},{"Type":"type","X":36.0,"Y":25.0},{"Type":"type","X":37.0,"Y":25.0},{"Type":"type","X":38.0,"Y":25.0},{"Type":"type","X":39.0,"Y":25.0},{"Type":"type","X":40.0,"Y":25.0},{"Type":"type","X":41.0,"Y":25.0},{"Type":"type","X":42.0,"Y":25.0},{"Type":"type","X":43.0,"Y":25.0},{"Type":"type","X":44.0,"Y":25.0},{"Type":"type","X":45.0,"Y":25.0},{"Type":"type","X":46.0,"Y":25.0},{"Type":"type","X":47.0,"Y":25.0},{"Type":"type","X":48.0,"Y":25.0},{"Type":"type","X":49.0,"Y":25.0},{"Type":"type","X":0.0,"Y":26.0},{"Type":"type","X":1.0,"Y":26.0},{"Type":"type","X":2.0,"Y":26.0},{"Type":"type","X":3.0,"Y":26.0},{"Type":"type","X":6.0,"Y":26.0},{"Type":"type","X":7.0,"Y":26.0},{"Type":"type","X":8.0,"Y":26.0},{"Type":"type","X":12.0,"Y":26.0},{"Type":"type","X":13.0,"Y":26.0},{"Type":"type","X":14.0,"Y":26.0},{"Type":"type","X":15.0,"Y":26.0},{"Type":"type","X":16.0,"Y":26.0},{"Type":"type","X":17.0,"Y":26.0},{"Type":"type","X":22.0,"Y":26.0},{"Type":"type","X":23.0,"Y":26.0},{"Type":"type","X":24.0,"Y":26.0},{"Type":"type","X":25.0,"Y":26.0},{"Type":"type","X":29.0,"Y":26.0},{"Type":"type","X":30.0,"Y":26.0},{"Type":"type","X":31.0,"Y":26.0},{"Type":"type","X":32.0,"Y":26.0},{"Type":"type","X":33.0,"Y":26.0},{"Type":"type","X":34.0,"Y":26.0},{"Type":"type","X":35.0,"Y":26.0},{"Type":"type","X":36.0,"Y":26.0},{"Type":"type","X":37.0,"Y":26.0},{"Type":"type","X":38.0,"Y":26.0},{"Type":"type","X":39.0,"Y":26.0},{"Type":"type","X":40.0,"Y":26.0},{"Type":"type","X":41.0,"Y":26.0},{"Type":"type","X":42.0,"Y":26.0},{"Type":"type","X":43.0,"Y":26.0},{"Type":"type","X":44.0,"Y":26.0},{"Type":"type","X":45.0,"Y":26.0},{"Type":"type","X":46.0,"Y":26.0},{"Type":"type","X":47.0,"Y":26.0},{"Type":"type","X":48.0,"Y":26.0},{"Type":"type","X":49.0,"Y":26.0},{"Type":"type","X":0.0,"Y":27.0},{"Type":"type","X":1.0,"Y":27.0},{"Type":"type","X":2.0,"Y":27.0},{"Type":"type","X":3.0,"Y":27.0},{"Type":"type","X":4.0,"Y":27.0},{"Type":"type","X":5.0,"Y":27.0},{"Type":"type","X":6.0,"Y":27.0},{"Type":"type","X":7.0,"Y":27.0},{"Type":"type","X":8.0,"Y":27.0},{"Type":"type","X":9.0,"Y":27.0},{"Type":"type","X":10.0,"Y":27.0},{"Type":"type","X":11.0,"Y":27.0},{"Type":"type","X":12.0,"Y":27.0},{"Type":"type","X":13.0,"Y":27.0},{"Type":"type","X":14.0,"Y":27.0},{"Type":"type","X":15.0,"Y":27.0},{"Type":"type","X":16.0,"Y":27.0},{"Type":"type","X":17.0,"Y":27.0},{"Type":"type","X":18.0,"Y":27.0},{"Type":"type","X":19.0,"Y":27.0},{"Type":"type","X":20.0,"Y":27.0},{"Type":"type","X":21.0,"Y":27.0},{"Type":"type","X":22.0,"Y":27.0},{"Type":"type","X":23.0,"Y":27.0},{"Type":"type","X":24.0,"Y":27.0},{"Type":"type","X":25.0,"Y":27.0},{"Type":"type","X":26.0,"Y":27.0},{"Type":"type","X":27.0,"Y":27.0},{"Type":"type","X":28.0,"Y":27.0},{"Type":"type","X":29.0,"Y":27.0},{"Type":"type","X":30.0,"Y":27.0},{"Type":"type","X":31.0,"Y":27.0},{"Type":"type","X":32.0,"Y":27.0},{"Type":"type","X":33.0,"Y":27.0},{"Type":"type","X":34.0,"Y":27.0},{"Type":"type","X":35.0,"Y":27.0},{"Type":"type","X":36.0,"Y":27.0},{"Type":"type","X":37.0,"Y":27.0},{"Type":"type","X":38.0,"Y":27.0},{"Type":"type","X":39.0,"Y":27.0},{"Type":"type","X":40.0,"Y":27.0},{"Type":"type","X":41.0,"Y":27.0},{"Type":"type","X":42.0,"Y":27.0},{"Type":"type","X":43.0,"Y":27.0},{"Type":"type","X":44.0,"Y":27.0},{"Type":"type","X":45.0,"Y":27.0},{"Type":"type","X":46.0,"Y":27.0},{"Type":"type","X":47.0,"Y":27.0},{"Type":"type","X":48.0,"Y":27.0},{"Type":"type","X":49.0,"Y":27.0}]}'
        //String tilesString = rest.get("http://192.168.0.172/Mapster/api/map?mapWidth=${width}&height=${height}")
        JSONArray tilesJSON = new JSONObject(tilesString).getJSONArray("tiles")

        GameMap map = new GameMap()
        map.startingPositions = new Vector2d[playerCount]

        List<Tile> tileArray = new ArrayList<>()
        for (int i = 0; i < tilesJSON.length(); i++) {
            JSONObject tileJSON = tilesJSON.getJSONObject(i)
            Tile tile = new Tile(tileJSON)
            tileArray.add(tile)
        }

        map.tileModels = tileArray
        map.gameArea = [tileArray.last().X+1, tileArray.last().Y+1]

        JSONObject tilesObject = new JSONObject()
        tilesObject.put("tiles", tilesJSON)
        tilesObject.put("environment", environment.toString().toLowerCase())
        map.tiles = tilesObject.toString() // Save as JSON String since we don't need it in model format in game-console

        for (int i = 0; i < playerCount; i++) {
            Vector2d startingPos = new Vector2d()
            startingPos.x = 10
            startingPos.y = 12 + i * 3
            map.startingPositions[i] = startingPos
        }

        return map
    }
}
